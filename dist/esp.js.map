{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e3123749589a0a86ea87","webpack:///C:/dev/esp/esp-js/src/index.js","webpack:///C:/dev/esp/esp-js/src/router/ObservationStage.js","webpack:///C:/dev/esp/esp-js/src/router/Router.js","webpack:///C:/dev/esp/esp-js/src/router/EventContext.js","webpack:///C:/dev/esp/esp-js/src/system/index.js","webpack:///C:/dev/esp/esp-js/src/system/disposables/index.js","webpack:///C:/dev/esp/esp-js/src/system/disposables/CompositeDisposable.js","webpack:///C:/dev/esp/esp-js/src/system/Guard.js","webpack:///C:/dev/esp/esp-js/src/system/utils.js","webpack:///C:/dev/esp/esp-js/src/system/disposables/DisposableWrapper.js","webpack:///C:/dev/esp/esp-js/src/system/disposables/DictionaryDisposable.js","webpack:///C:/dev/esp/esp-js/src/system/logger.js","webpack:///C:/dev/esp/esp-js/src/router/ModelRecord.js","webpack:///C:/dev/esp/esp-js/src/router/State.js","webpack:///C:/dev/esp/esp-js/src/router/Status.js","webpack:///C:/dev/esp/esp-js/src/router/ModelRouter.js","webpack:///C:/dev/esp/esp-js/src/reactive/index.js","webpack:///C:/dev/esp/esp-js/src/reactive/extMethods/where.js","webpack:///C:/dev/esp/esp-js/src/reactive/Observable.js","webpack:///C:/dev/esp/esp-js/src/reactive/Observer.js","webpack:///C:/dev/esp/esp-js/src/reactive/extMethods/asObservable.js","webpack:///C:/dev/esp/esp-js/src/reactive/extMethods/take.js","webpack:///C:/dev/esp/esp-js/src/reactive/extMethods/do.js","webpack:///C:/dev/esp/esp-js/src/reactive/Subject.js","webpack:///C:/dev/esp/esp-js/src/model/events/index.js","webpack:///C:/dev/esp/esp-js/src/model/events/AsyncWorkCompleteEvent.js","webpack:///C:/dev/esp/esp-js/src/model/events/ModelChangedEvent.js","webpack:///C:/dev/esp/esp-js/src/model/index.js","webpack:///C:/dev/esp/esp-js/src/model/DisposableBase.js","webpack:///C:/dev/esp/esp-js/src/model/ModelBase.js","webpack:///C:/dev/esp/esp-js/src/model/ModelRootBase.js"],"names":[],"mappings":"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","file":"esp.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"esp\"] = factory();\n\telse\n\t\troot[\"esp\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e3123749589a0a86ea87\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nexports.ObservationStage = require('./router/ObservationStage');\r\nexports.Router = require('./router/Router');\r\nexports.model = require('./model');\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/index.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\n\r\nclass ObservationStage {\r\n    static get preview() { return  'preview'; }\r\n    static get normal() { return  'normal'; }\r\n    static get committed() { return  'committed'; }\r\n}\r\n\r\nexport default ObservationStage;\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/router/ObservationStage.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport EventContext from './EventContext';\r\nimport ObservationStage from './ObservationStage';\r\nimport ModelRecord from './ModelRecord';\r\nimport State from './State.js';\r\nimport Status from './Status.js';\r\nimport ModelRouter from './ModelRouter.js';\r\nimport { Subject, Observable } from '../reactive/index';\r\nimport { ModelChangedEvent } from '../model/events/index';\r\nimport { Guard, utils, logger } from '../system';\r\n\r\nvar _log = logger.create('Router');\r\n\r\nexport default class Router {\r\n    constructor() {\r\n        this._models = {};\r\n        this._modelUpdateSubjects = {};\r\n        this._modelEventSubjects = {};\r\n        this._haltingException = undefined;\r\n        this._state = new State();\r\n    }\r\n    registerModel(modelId, model, options) {\r\n        this._throwIfHalted();\r\n        Guard.isString(modelId, 'The modelId argument should be a string');\r\n        Guard.isDefined(model, 'THe model argument must be defined');\r\n        if(options) Guard.isObject(options, 'The options argument should be an object');\r\n        Guard.isFalsey(this._models[modelId], 'The model with id [' + modelId + '] is already registered');\r\n        this._models[modelId] = new ModelRecord(modelId, model, options);\r\n    }  \r\n    removeModel(modelId){\r\n        Guard.isString(modelId, 'The modelId argument should be a string');\r\n        let modelRecord = this._models[modelId];\r\n        if(modelRecord){\r\n            modelRecord.wasRemoved = true;\r\n            delete this._models[modelId];\r\n            modelRecord.eventQueue.length = 0;\r\n            let modelUpdateSubjects = this._modelUpdateSubjects[modelId];\r\n            if(modelUpdateSubjects) {\r\n                delete this._modelUpdateSubjects[modelId];\r\n                modelUpdateSubjects.onCompleted();\r\n            }\r\n            let modelEventSubjects = this._modelEventSubjects[modelId];\r\n            if(modelEventSubjects) {\r\n                delete this._modelEventSubjects[modelId];\r\n                for (let p in modelEventSubjects) {\r\n                    if(modelEventSubjects.hasOwnProperty(p)) {\r\n                        let eventSubjects = modelEventSubjects[p];\r\n                        eventSubjects.preview.onCompleted();\r\n                        eventSubjects.normal.onCompleted();\r\n                        eventSubjects.committed.onCompleted();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    publishEvent(modelId, eventType, event) {\r\n        Guard.isString(modelId, 'The modelId argument should be a string');\r\n        Guard.isString(eventType, 'The eventType argument should be a string');\r\n        Guard.isDefined(event, 'The event argument must be defined');\r\n        this._throwIfHalted();\r\n        if (this._state.currentStatus === Status.EventExecution) {\r\n            throw new Error('You can not publish further events when performing an event execution. modelId1: [' + modelId + '], eventType:[' + eventType + ']');\r\n        }\r\n        this._eventQueue(modelId, eventType, event);\r\n        this._purgeEventQueues();\r\n    }\r\n    broadcastEvent(eventType, event) {\r\n        Guard.isString(eventType, 'The eventType argument should be a string');\r\n        Guard.isDefined(event, 'The event argument should be defined');\r\n        for (let modelId in this._models) {\r\n            if (this._models.hasOwnProperty(modelId)) {\r\n                this._eventQueue(modelId, eventType, event);\r\n            }\r\n        }\r\n        this._purgeEventQueues();\r\n    }\r\n    executeEvent(eventType, event) {\r\n        this._throwIfHalted();\r\n        Guard.isString(eventType, 'The eventType argument should be a string');\r\n        Guard.isDefined(event, 'The event argument should be defined');\r\n\r\n        this._state.executeEvent(() => {\r\n            let eventContext = new EventContext(\r\n                this._state.currentModelId,\r\n                eventType,\r\n                event\r\n            );\r\n            this._dispatchEventToEventProcessors(\r\n                this._state.currentModelId,\r\n                this._state.currentModel,\r\n                event,\r\n                eventType,\r\n                eventContext\r\n            );\r\n        });\r\n    }\r\n    getEventObservable(modelId, eventType, stage) {\r\n        return Observable.create(o => {\r\n            this._throwIfHalted();\r\n            Guard.isString(modelId, 'The modelId argument should be a string');\r\n            Guard.isDefined(modelId, 'The modelId argument should be defined');\r\n            Guard.isDefined(eventType, 'The eventType argument should be defined');\r\n\r\n            if(stage) {\r\n                Guard.isString(stage, 'The stage argument should be a string');\r\n                Guard.isTrue(stage === ObservationStage.preview || stage === ObservationStage.normal || stage === ObservationStage.committed, 'The stage argument value of [' + stage + '] is incorrect. It should be preview, normal or committed.');\r\n            } else {\r\n                stage = ObservationStage.normal;\r\n            }\r\n            let subjects = this._getModelsEventSubjects(modelId, eventType);\r\n            let subject = subjects[stage];\r\n            return subject.observe(o);\r\n        });\r\n    }\r\n    getModelObservable(modelId) {\r\n        return Observable.create(o => {\r\n            this._throwIfHalted();\r\n            Guard.isString(modelId, 'The modelId should be a string');\r\n\r\n            let updateSubject = this._modelUpdateSubjects[modelId];\r\n            if (typeof updateSubject === 'undefined') {\r\n                updateSubject = new Subject();\r\n                this._modelUpdateSubjects[modelId] = updateSubject;\r\n            }\r\n            return updateSubject.observe(o);\r\n        });\r\n    }\r\n    createModelRouter(targetModelId) {\r\n        Guard.isString(targetModelId, 'The targetModelId argument should be a string');\r\n        return new ModelRouter(this, targetModelId);\r\n    }\r\n    _eventQueue(modelId, eventType, event) {\r\n        // don't enqueue a model changed event for the same model that changed\r\n        if(eventType === 'modelChangedEvent' && event.modelId === modelId)\r\n            return;\r\n        let modelRecord = this._models[modelId];\r\n        if (typeof modelRecord === 'undefined') {\r\n            throw new Error('Can not publish event of type [' + eventType + '] as model with id [' + modelId + '] not registered');\r\n        } else {\r\n            try {\r\n                let subjects = this._getModelsEventSubjects(modelId, eventType);\r\n                // only enqueue if the model has observers for the given event type\r\n                if(subjects.hasOwnProperty(eventType)) {\r\n                    modelRecord.eventQueue.push({eventType: eventType, event: event});\r\n                }\r\n                this._purgeEventQueues();\r\n            } catch (err) {\r\n                this._halt(err);\r\n            }\r\n        }\r\n    }\r\n    _getModelsEventSubjects(modelId, eventType) {\r\n        let modelEventSubject = this._modelEventSubjects[modelId];\r\n        if (typeof modelEventSubject === 'undefined') {\r\n            modelEventSubject = {};\r\n            this._modelEventSubjects[modelId] = modelEventSubject;\r\n        }\r\n        let subjects = modelEventSubject[eventType];\r\n        if (typeof subjects === 'undefined') {\r\n            subjects = {\r\n                preview: new Subject(),\r\n                normal: new Subject(),\r\n                committed: new Subject()\r\n            };\r\n            modelEventSubject[eventType] = subjects;\r\n        }\r\n        return subjects;\r\n    }\r\n    _purgeEventQueues() {\r\n        if (this._state.currentStatus === Status.Idle) {\r\n            let modelRecord = this._getNextModelRecordWithQueuedEvents();\r\n            let hasEvents = typeof modelRecord !== 'undefined';\r\n            while (hasEvents) { \r\n                while (hasEvents) {\r\n                    this._state.moveToPreProcessing(modelRecord.modelId, modelRecord.model);\r\n                    let eventRecord = modelRecord.eventQueue.shift();\r\n                    if (modelRecord.model.unlock && typeof modelRecord.model.unlock === 'function') {\r\n                        modelRecord.model.unlock();\r\n                    }\r\n                    var eventContext = new EventContext(modelRecord.modelId, eventRecord.eventType, eventRecord.event);\r\n                    modelRecord.runPreEventProcessor(modelRecord.model, eventRecord.event, eventContext);\r\n                    if (!modelRecord.wasRemoved) {\r\n                        if (!eventContext.isCanceled) {\r\n                            this._state.moveToEventDispatch();\r\n                            while (hasEvents) {\r\n                                let wasDispatched = this._dispatchEventToEventProcessors(modelRecord.modelId, modelRecord.model, eventRecord.event, eventRecord.eventType, eventContext);\r\n                                if (modelRecord.wasRemoved) break;\r\n                                if (!modelRecord.hasChanges && wasDispatched) {\r\n                                    modelRecord.hasChanges = true;\r\n                                }\r\n                                hasEvents = modelRecord.eventQueue.length > 0;\r\n                                if (hasEvents) {\r\n                                    eventRecord = modelRecord.eventQueue.shift();\r\n                                    eventContext = new EventContext(modelRecord.modelId, eventRecord.eventType, eventRecord.event);\r\n                                }\r\n                            } // keep looping until any events from the dispatch to processors stage are processed\r\n                        }\r\n                        if (!modelRecord.wasRemoved) {\r\n                            this._state.moveToPostProcessing();\r\n                            modelRecord.runPostEventProcessor(modelRecord.model, eventRecord.event, eventContext);\r\n                            if (modelRecord.model.lock && typeof modelRecord.model.lock === 'function') {\r\n                                modelRecord.model.lock();\r\n                            }\r\n                        }\r\n                    }\r\n                    this.broadcastEvent('modelChangedEvent', new ModelChangedEvent(modelRecord.modelId, eventRecord.eventType));\r\n                    modelRecord = this._getNextModelRecordWithQueuedEvents();\r\n                    hasEvents = typeof modelRecord !== 'undefined';\r\n                }  // keep looping until any events raised during post event processing OR event that have come in for other models are processed\r\n                this._state.moveToDispatchModelUpdates();\r\n                this._dispatchModelUpdates();\r\n                modelRecord = this._getNextModelRecordWithQueuedEvents();\r\n                hasEvents = typeof modelRecord !== 'undefined';\r\n            } // keep looping until any events from the dispatch updates stages are processed\r\n            this._state.moveToIdle();\r\n        }\r\n    }\r\n    _dispatchEventToEventProcessors(modelId, model, event, eventType, eventContext) {\r\n        let dispatchEvent = (model1, event1, context, subject) => {\r\n            let wasDispatched = false;\r\n            if (subject.getObserverCount() > 0) {\r\n                // note: if the model was removed by an observer the subject will be completed so subsequent observers won't get the event\r\n                subject.onNext(model1, event1, context);\r\n                if(subject.hasError) {\r\n                    throw subject.error;\r\n                }\r\n                wasDispatched = true;\r\n            }\r\n            return wasDispatched;\r\n        };\r\n\r\n        let eventSubjects = this._getModelsEventSubjects(modelId, eventType);\r\n        let wasDispatched = dispatchEvent(model, event, eventContext, eventSubjects.preview);\r\n        if (eventContext.isCommitted) {\r\n            throw new Error('You can\\'t commit an event at the preview stage. Event: [' + eventContext.eventType + '], ModelId: [' + modelId + ']');\r\n        }\r\n        if (!eventContext.isCanceled) {\r\n            wasDispatched = dispatchEvent(model, event, eventContext, eventSubjects.normal);\r\n            if (eventContext.isCanceled) {\r\n                throw new Error('You can\\'t cancel an event at the normal stage. Event: [' + eventContext.eventType + '], ModelId: [' + modelId + ']');\r\n            }\r\n            if (wasDispatched && eventContext.isCommitted) {\r\n                dispatchEvent(model, event, eventContext, eventSubjects.committed);\r\n                if (eventContext.isCanceled) {\r\n                    throw new Error('You can\\'t cancel an event at the committed stage. Event: [' + eventContext.eventType + '], ModelId: [' + modelId + ']');\r\n                }\r\n            }\r\n        }\r\n        return wasDispatched;\r\n    }\r\n    _dispatchModelUpdates() {\r\n        let updates = [], modelUpdateSubject;\r\n        for (let modelId in this._models) {\r\n            if (this._models.hasOwnProperty(modelId)) {\r\n                let modelRecord = this._models[modelId];\r\n                if (modelRecord.hasChanges) {\r\n                    modelRecord.hasChanges = false;\r\n                    updates.push(modelRecord);\r\n                }\r\n            }\r\n        }\r\n        for (let i = 0, len = updates.length; i < len; i++) {\r\n            modelUpdateSubject = this._modelUpdateSubjects[updates[i].modelId];\r\n            if (typeof modelUpdateSubject !== 'undefined') {\r\n                modelUpdateSubject.onNext(updates[i].model);\r\n                if(modelUpdateSubject.hasError) {\r\n                    throw modelUpdateSubject.error;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _getNextModelRecordWithQueuedEvents() {\r\n        let nextModel;\r\n        for (let modelId in this._models) {\r\n            if (this._models.hasOwnProperty(modelId)) {\r\n                let current = this._models[modelId];\r\n                if (current.eventQueue.length > 0) {\r\n                    nextModel = current;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return nextModel;\r\n    }\r\n    _throwIfHalted() {\r\n        if (this._state.currentStatus === Status.Halted) {\r\n            let message = utils.format('Event router halted due to previous error [{0}]', this._haltingException);\r\n            throw new Error(message);\r\n        }\r\n    }\r\n    _halt(err) {\r\n        this._state.moveToHalted();\r\n        _log.error('Router halted error: [{0}]', err);\r\n        this._haltingException = err;\r\n        throw err;\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/router/Router.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport { Guard } from '../system';\r\n\r\nclass EventContext {\r\n    constructor(modelId, eventType, event) {\r\n        Guard.isString(modelId, \"The modelId should be a string\");\r\n        Guard.isString(eventType, \"The eventType should be a string\");\r\n        Guard.isDefined(event, \"The event should be defined\");\r\n        this._modelId = modelId;\r\n        this._eventType = eventType;\r\n        this._event = event;\r\n        this._isCanceled = false;\r\n        this._isCommitted = false;\r\n    }\r\n    get isCanceled() {\r\n        return this._isCanceled;\r\n    }\r\n    get isCommitted() {\r\n        return this._isCommitted;\r\n    }\r\n    get modelId() {\r\n        return this._modelId;\r\n    }\r\n    get event() {\r\n        return this._event;\r\n    }\r\n    get eventType() {\r\n        return this._eventType;\r\n    }\r\n    cancel() {\r\n        if(!this._isCanceled) {\r\n            this._isCanceled = true;\r\n        } else {\r\n            throw new Error('event is already cancelled');\r\n        }\r\n    }\r\n    commit() {\r\n        if(!this._isCommitted) {\r\n            this._isCommitted = true;\r\n        } else {\r\n            throw 'event is already committed';\r\n        }\r\n    }\r\n}\r\n\r\nexport default EventContext;\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/router/EventContext.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport disposables from './disposables';\r\nimport Guard from './Guard';\r\nimport * as logger from './logger';\r\nimport * as utils  from './utils'; \r\nexport default { disposables, Guard, logger, utils };\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/system/index.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport CompositeDisposable from './CompositeDisposable';\r\nimport DictionaryDisposable from './DictionaryDisposable';\r\nimport DisposableWrapper from './DisposableWrapper';\r\nexport default { CompositeDisposable, DictionaryDisposable, DisposableWrapper };\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/system/disposables/index.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport Guard from '../Guard';\r\nimport DisposableWrapper from './DisposableWrapper';\r\n\r\nexport default class CompositeDisposable {\r\n    constructor() {\r\n        this._disposables = [];\r\n        this._isDisposed = false;\r\n    }\r\n    get isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    add(disposable) {\r\n        var disposableWrapper = new DisposableWrapper(disposable);\r\n        if(this._isDisposed) {\r\n            disposableWrapper.dispose();\r\n            return;\r\n        }\r\n        this._disposables.push(disposableWrapper);\r\n    }\r\n    dispose() {\r\n        if(!this._isDisposed) {\r\n            this._isDisposed = true;\r\n            for (var i = 0, len = this._disposables.length; i < len; i++) {\r\n                var disposable = this._disposables[i];\r\n                disposable.dispose();\r\n            }\r\n            this._disposables.length = 0;\r\n        }\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/system/disposables/CompositeDisposable.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport * as utils from './utils';\r\n\r\nexport default class Guard {\r\n    static isDefined(value, message) {\r\n        if (typeof value === 'undefined') {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static isFalsey(value, message) {\r\n        if (value) {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static lengthIs(array, length, message) {\r\n        if (array.length !== length) {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static lengthGreaterThan(array, expected, message) {\r\n        if (array.length < expected) {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static lengthIsAtLeast(array, expected, message) {\r\n        if (array.length < expected) {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static isString(value, message) {\r\n        if (!utils.isString(value)) {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static isTrue(check, message) {\r\n        if (!check) {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static isFunction(item, message) {\r\n        if (typeof(item) != \"function\") {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static isNumber(value, message) {\r\n        if (isNaN(value)) {\r\n            doThrow(message);\r\n        }\r\n    }\r\n    static isObject(value,message) {\r\n        if(typeof value !== 'object') {\r\n            doThrow(message);\r\n        }\r\n    }\r\n}\r\n\r\nfunction doThrow(message) {\r\n    if(typeof message === 'undefined' || message === '') {\r\n        throw new Error(\"Argument error\");\r\n    }\r\n    throw new Error(message);\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/system/Guard.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nexport function removeAll(arr, item) {\r\n    for(var i = arr.length; i--;) {\r\n        if(arr[i] === item) {\r\n            arr.splice(i, 1);\r\n        }\r\n    }\r\n}\r\n\r\nexport function isString(value) {\r\n    return typeof value == 'string' || value instanceof String;\r\n}\r\n\r\nexport function format(formatString) {\r\n    //Guard.isString(format, \"First argument to a log function should be a string, but got [\" + format + \"]\");\r\n    var args = Array.prototype.slice.call(arguments, 1);\r\n    var message = formatString.replace(/{(\\d+)}/g, function (match, number) {\r\n        return typeof args[number] != 'undefined'\r\n            ? args[number]\r\n            : match;\r\n    });\r\n    return message;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/system/utils.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport Guard from '../Guard';\r\n\r\nexport default class DisposableWrapper {\r\n    constructor(disposable) {\r\n        Guard.isDefined(disposable, \"disposable must be defined\");\r\n        var innerDisposable;\r\n        if(typeof disposable === 'function') {\r\n            innerDisposable = { dispose: function() { disposable(); } };\r\n        } else if(disposable.dispose && typeof disposable.dispose === 'function') {\r\n            innerDisposable = {\r\n                dispose: () => {\r\n                    // at this point if something has deleted the dispose or it's not a function we just ignore it.\r\n                    if (disposable.dispose && typeof disposable.dispose === 'function') {\r\n                        disposable.dispose();\r\n                    }\r\n                }\r\n            };\r\n        } else {\r\n            throw new Error('Item to dispose was neither a function nor had a dispose method.');\r\n        }\r\n        this._isDisposed = false;\r\n        this._disposable = innerDisposable;\r\n    }\r\n    get isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    dispose() {\r\n        if(!this._isDisposed && this._disposable) {\r\n            this._isDisposed = true;\r\n            this._disposable.dispose();\r\n        }\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/system/disposables/DisposableWrapper.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport DisposableWrapper from './DisposableWrapper';\r\n\r\nexport default class DictionaryDisposable {\r\n    constructor() {\r\n        this._isDisposed = false;\r\n    }\r\n    add(key, disposable) {\r\n        if(this.hasOwnProperty(key)) {\r\n            throw new Error(\"Key \" + key + \" already found\");\r\n        }\r\n        var disposableWrapper = new DisposableWrapper(disposable);\r\n        if(this._isDisposed) {\r\n            disposableWrapper.dispose();\r\n            return;\r\n        }\r\n        this[key] = disposableWrapper;\r\n    }\r\n    remove(key) {\r\n        if(this.hasOwnProperty(key)) {\r\n            delete this[key];\r\n        }\r\n    }\r\n    dispose() {\r\n       // if(!this._isDisposed) {\r\n            this._isDisposed = true;\r\n            for (var p in this) {\r\n                if (this.hasOwnProperty(p)) {\r\n                    var disposable = this[p];\r\n                    if (disposable.dispose) {\r\n                        disposable.dispose();\r\n                    }\r\n                }\r\n            }\r\n       // }\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/system/disposables/DictionaryDisposable.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport Guard from './Guard';\r\n\r\nvar levels = {\r\n    verbose:0,\r\n    debug:1,\r\n    info:2,\r\n    warn:3,\r\n    error:4\r\n};\r\n\r\nvar _currentLevel = levels.debug;\r\n\r\nvar _sink = logEvent => {\r\n    console.log('[' + logEvent.logger + '] [' + logEvent.level + ']: ' + logEvent.message);\r\n};\r\n\r\nclass Logger {\r\n    constructor(name) {\r\n        this._name = name;\r\n    }\r\n\r\n    verbose(format) {\r\n        if (_currentLevel <= levels.verbose) {\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n            this._log(\"VERBOSE\", format, args);\r\n        }\r\n    }\r\n\r\n    debug(format) {\r\n        if (_currentLevel <= levels.debug) {\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n            this._log(\"DEBUG\", format, args);\r\n        }\r\n    }\r\n\r\n    info(format) {\r\n        if (_currentLevel <= levels.info) {\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n            this._log(\"INFO\", format, args);\r\n        }\r\n    }\r\n\r\n    warn(format) {\r\n        if (_currentLevel <= levels.warn) {\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n            this._log(\"WARN\", format, args);\r\n        }\r\n    }\r\n\r\n    error(format) {\r\n        if (_currentLevel <= levels.error) {\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n            this._log(\"ERROR\", format, args);\r\n        }\r\n    }\r\n    _log(level, format, args) {\r\n        Guard.isString(format, \"First argument to a log function should be a string, but got [\" + format + \"]\");\r\n        var message = format.replace(/{(\\d+)}/g, function (match, number) {\r\n            return typeof args[number] != 'undefined'\r\n                ? args[number]\r\n                : match;\r\n        });\r\n        _sink({\r\n            logger: this._name,\r\n            level: level,\r\n            message: message\r\n        });\r\n    }\r\n}\r\n\r\nexport function create(name) {\r\n    Guard.isDefined(name, \"The name argument should be defined\");\r\n    Guard.isString(name, \"The name argument should be a string\");\r\n    return new Logger(name);\r\n}\r\n\r\nexport function setLevel(level) {\r\n    _currentLevel = level;\r\n}\r\n\r\nexport function setSink(sink) {\r\n    Guard.isFunction(sink, \"Logging sink argument must be a function\");\r\n    _sink = sink;\r\n}\r\n\r\nexport { levels };\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/system/logger.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport { Guard } from '../system';\r\n\r\nclass ModelRecord {\r\n    // parentModelId is undefined if it's the root\r\n    constructor(modelId, model, options) {\r\n        this._modelId = modelId;\r\n        this._model = model;\r\n        this._eventQueue = [];\r\n        this._hasChanges = false;\r\n        this._wasRemoved = false;\r\n        this._runPreEventProcessor = this._createEventProcessor(\"preEventProcessor\", options ? options.preEventProcessor : undefined);\r\n        this._runPostEventProcessor = this._createEventProcessor(\"postEventProcessor\", options ? options.postEventProcessor : undefined);\r\n    }\r\n    get modelId() {\r\n        return this._modelId;\r\n    }\r\n    get model() {\r\n        return this._model;\r\n    }\r\n    get eventQueue() {\r\n        return this._eventQueue;\r\n    }\r\n    get hasChanges() {\r\n        return this._hasChanges;\r\n    }\r\n    set hasChanges(value) {\r\n        this._hasChanges = value;\r\n    }\r\n    get wasRemoved() {\r\n        return this._wasRemoved;\r\n    }\r\n    set wasRemoved(value) {\r\n        this._wasRemoved = value;\r\n    }\r\n    get runPreEventProcessor() {\r\n        return this._runPreEventProcessor;\r\n    }\r\n    get runPostEventProcessor() {\r\n        return this._runPostEventProcessor;\r\n    }\r\n    _createEventProcessor(name, processor) {\r\n        if(processor) {\r\n            let isValid = typeof processor === 'function' || (typeof processor.process === 'function');\r\n            Guard.isTrue(isValid, name + \" should be a function or an object with a process() function\");\r\n            return (model, event, context) => {\r\n                // I guess it's possible the shape of the processor changed since we validated it, hence the recheck, another option could be to bind the initial value and always use that.\r\n                if(typeof processor === 'function') {\r\n                    processor(model, event, context);\r\n                } else if(typeof processor.process === 'function') {\r\n                    processor.process(model, event, context);\r\n                } else {\r\n                    throw new Error(name + \" is neither a function or an object with a process() method\");\r\n                }\r\n            };\r\n        }\r\n        return () => { /* noop processor */  };\r\n    }\r\n}\r\n\r\nexport default ModelRecord;\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/router/ModelRecord.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport { Guard } from '../system';\r\nimport Status from './Status.js';\r\n\r\n// note: perhaps some validation on state transition could be added here, but the tests cover most edges cases already\r\nexport default class State {\r\n    constructor() {\r\n        this._currentStatus = Status.Idle;\r\n    }\r\n    get currentStatus() {\r\n        return this._currentStatus;\r\n    }\r\n    get currentModelId() {\r\n        return this._currentModelId;\r\n    }\r\n    get currentModel() {\r\n        return this._currentModel;\r\n    }\r\n    moveToIdle() {\r\n        this._currentStatus = Status.Idle;\r\n        this._clear();\r\n    }\r\n    moveToPreProcessing(modelId, model) {\r\n        Guard.isString(modelId, 'The modelId should be a string');\r\n        Guard.isDefined(model, 'The model should be defined');\r\n        this._currentModelId = modelId;\r\n        this._currentModel = model;\r\n        this._currentStatus = Status.PreEventProcessing;\r\n    }\r\n    moveToEventDispatch() {\r\n        this._currentStatus = Status.EventProcessorDispatch;\r\n    }\r\n    moveToPostProcessing() {\r\n        this._currentStatus = Status.PostProcessing;\r\n    }\r\n    executeEvent(executeAction) {\r\n        var canMove = this._currentStatus === Status.PreEventProcessing || this._currentStatus === Status.EventProcessorDispatch || this._currentStatus === Status.PostProcessing;\r\n        Guard.isTrue(canMove, 'Can\\'t move to executing as the current state ' + this._currentStatus + ' doesn\\'t allow it');\r\n        var previousStatus = this._currentStatus;\r\n        this._currentStatus = Status.EventExecution;\r\n        executeAction();\r\n        this._currentStatus = previousStatus;\r\n    }\r\n    moveToDispatchModelUpdates() {\r\n        this._currentStatus = Status.DispatchModelUpdates;\r\n    }\r\n    moveToHalted() {\r\n        this._currentStatus = Status.Halted;\r\n        this._clear();\r\n    }\r\n    _clear() {\r\n        this._currentModelId = undefined;\r\n        this._currentModel = undefined;\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/router/State.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nexport default class Status {\r\n    static get Idle() { return 'idle'; }\r\n    static get PreEventProcessing() { return 'preEventProcessorDispatch'; }\r\n    static get EventProcessorDispatch() { return 'eventProcessorDispatch'; }\r\n    static get EventExecution() { return 'eventProcessorExecution'; }\r\n    static get PostProcessing () { return 'postEventProcessorDispatch'; }\r\n    static get DispatchModelUpdates() { return 'dispatchModelUpdates'; }\r\n    static get Halted() { return 'halted'; }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/router/Status.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// notice_end\r\n\r\nexport default class ModelRouter {\r\n    constructor(underlyingRouter, targetModelId) {\r\n        this._underlying = underlyingRouter;\r\n        this._targetModelId = targetModelId;\r\n    }\r\n    publishEvent(eventType, event) {\r\n        this._underlying.publishEvent(this._targetModelId, eventType, event);\r\n    }\r\n    executeEvent(eventType, event) {\r\n        this._underlying.executeEvent(eventType, event);\r\n    }\r\n    getEventObservable(eventType, stage) {\r\n        return this._underlying.getEventObservable(this._targetModelId, eventType, stage);\r\n    }\r\n    getModelObservable() {\r\n        return this._underlying.getModelObservable(this._targetModelId);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/router/ModelRouter.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\n// these scripts have no exports, they add functionality to Observable\r\nimport './extMethods/where';\r\nimport './extMethods/asObservable';\r\nimport './extMethods/take';\r\nimport './extMethods/do';\r\n\r\nexport { default as Observable } from './Observable';\r\nexport { default as Observer } from './Observer';\r\nexport { default as Subject } from './Subject';\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/reactive/index.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport Observable from '../Observable';\r\nimport { Guard } from '../../system';\r\n\r\nObservable.prototype.where = function(predicate) {\r\n    Guard.isDefined(predicate, 'predicate Required');\r\n    var source = this;\r\n    var observe =  observer => {\r\n        return source.observe(\r\n            (arg1, arg2, arg3) => {\r\n                if(predicate(arg1, arg2, arg3)) {\r\n                    observer.onNext(arg1, arg2, arg3);\r\n                }\r\n            },\r\n            observer.onError.bind(observer),\r\n            () => observer.onCompleted()\r\n        );\r\n    };\r\n    return new Observable(observe);\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/reactive/extMethods/where.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport { Guard } from '../system';\r\nimport Observer from './Observer';\r\n\r\nclass Observable {\r\n    static create(onObserve) {\r\n        Guard.lengthIs(arguments, 1, \"Incorrect argument count on Observable, expect 1 onObserve function\");\r\n        var observe =  observer => {\r\n            return onObserve(observer);\r\n        };\r\n        return new Observable(observe);\r\n    }\r\n    constructor(observe) {\r\n        this._observe = observe;\r\n    }\r\n    observe() {\r\n        var observer;\r\n        if(arguments.length === 1 && arguments[0] instanceof Observer) {\r\n            observer = arguments[0];\r\n        } else {\r\n            Guard.lengthIsAtLeast(arguments, 1, \"Incorrect args count of \" + arguments.length);\r\n            var onNext = arguments[0];\r\n            var onError = arguments.length >= 1 ? arguments[1] : undefined;\r\n            var onCompleted = arguments.length >= 2 ? arguments[2] : undefined;\r\n            observer = new Observer(onNext, onError, onCompleted);\r\n        }\r\n        Guard.isDefined(this._observe, '_observe not set');\r\n        return this._observe(observer);\r\n    }\r\n}\r\n\r\nexport default Observable;\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/reactive/Observable.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport { Guard } from '../system';\r\n\r\nclass Observer {\r\n    constructor(onNext, onError, onCompleted) {\r\n        Guard.isDefined(onNext, 'onObserve Required');\r\n        this._hasError = false;\r\n        this._hasCompleted = false;\r\n        this._onNext = onNext;\r\n        this._onError = (ex) => {\r\n            if(typeof onError === 'undefined' || typeof onError !== 'function') {\r\n                throw ex; // we default to re-throwing if there is no error handler provide\r\n            }\r\n            else {\r\n                onError(ex);\r\n            }\r\n        };\r\n        this._onCompleted = () => {\r\n            if(typeof onCompleted !== 'undefined' && typeof onCompleted === 'function') {\r\n                onCompleted();\r\n            }\r\n        };\r\n    }\r\n    onNext(arg1, arg2, arg3) {\r\n        if(!this._hasError && !this._hasCompleted) {\r\n            this._onNext(arg1, arg2, arg3);\r\n        }\r\n    }\r\n    onError(value) {\r\n        if(!this._hasError) {\r\n            this._hasError = true;\r\n            this._onError(value);\r\n        }\r\n    }\r\n    onCompleted() {\r\n        if(!this._hasCompleted) {\r\n            this._hasCompleted = true;\r\n            this._onCompleted();\r\n        }\r\n    }\r\n}\r\nexport default Observer;\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/reactive/Observer.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport Observable from '../Observable';\r\n\r\nObservable.prototype.asObservable = function() {\r\n    var source = this;\r\n    var observe =  observer => {\r\n        return source.observe(\r\n            (arg1, arg2, arg3) => {\r\n                observer.onNext(arg1, arg2, arg3);\r\n            },\r\n            observer.onError.bind(observer),\r\n            () => observer.onCompleted()\r\n        );\r\n    };\r\n    return new Observable(observe);\r\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/reactive/extMethods/asObservable.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport Observable from '../Observable';\r\nimport { Guard } from '../../system';\r\n\r\n// TODO beta, needs test\r\nObservable.prototype.take = function(number) {\r\n    Guard.isNumber(number, \"provided value isn't a number\");\r\n    var source = this;\r\n    var itemsReceived = 0;\r\n    var hasCompleted = false;\r\n    var observe =  observer => {\r\n        return source.observe(\r\n            (arg1, arg2, arg3) => {\r\n                // there is possibly some strange edge cases if the observer also pumps a new value, this 'should' cover that (no tests yet)\r\n                itemsReceived++;\r\n                var shouldYield = !number || itemsReceived <= number;\r\n                if(shouldYield) {\r\n                    observer.onNext(arg1, arg2, arg3);\r\n                }\r\n                var shouldComplete = !number || itemsReceived >= number;\r\n                if(!hasCompleted && shouldComplete) {\r\n                    hasCompleted = true;\r\n                    observer.onCompleted();\r\n                }\r\n            },\r\n            observer.onError.bind(observer),\r\n            () => observer.onCompleted()\r\n        );\r\n    };\r\n    return new Observable(observe);\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/reactive/extMethods/take.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport Observable from '../Observable';\r\nimport { Guard } from '../../system';\r\n\r\n// TODO beta, needs test\r\nObservable.prototype.do = function(action) {\r\n    Guard.isFunction(action, \"provided value isn't a function\");\r\n    var source = this;\r\n    var observe =  observer => {\r\n        return source.observe(\r\n            (arg1, arg2, arg3) => {\r\n                action(arg1, arg2, arg3);\r\n                observer.onNext(arg1, arg2, arg3);\r\n            },\r\n            observer.onError.bind(observer),\r\n            () => observer.onCompleted()\r\n        );\r\n    };\r\n    return new Observable(observe);\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/reactive/extMethods/do.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport { utils } from '../system';\r\nimport Observable from './Observable';\r\n\r\nclass Subject extends Observable  {\r\n    constructor() {\r\n        super(undefined);\r\n        this._observe = observe.bind(this);\r\n        this._observers = [];\r\n        this._hasComplete = false;\r\n        this._hasError = false;\r\n    }\r\n    get hasError() {\r\n        return this._hasError;\r\n    }\r\n    get error() {\r\n        return this._error;\r\n    }\r\n    // The reactivate implementation can push 3 arguments through the stream, initially this was setup to\r\n    // pass all arguments using .apply, however it's performance is about 40% slower than direct method calls\r\n    // given this, and that we only ever push a max of 3 args, it makes sense to hard code them.\r\n    onNext(arg1, arg2, arg3) {\r\n        if(!this._hasComplete) {\r\n            var os = this._observers.slice(0);\r\n            for (var i = 0, len = os.length; i < len; i++) {\r\n                if(this._hasError) break;\r\n                var observer = os[i];\r\n                try {\r\n                    observer.onNext(arg1, arg2, arg3);\r\n                } catch (err) {\r\n                    this._hasError = true;\r\n                    this._error = err;\r\n                    observer.onError(err);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onCompleted() {\r\n        if(!this._hasComplete && !this._hasError) {\r\n            this._hasComplete = true;\r\n            var os = this._observers.slice(0);\r\n            for (var i = 0, len = os.length; i < len; i++) {\r\n                var observer = os[i];\r\n                observer.onCompleted();\r\n            }\r\n        }\r\n    }\r\n    onError(err) {\r\n        if(!this._hasError) {\r\n            this._hasError = true;\r\n            var os = this._observers.slice(0);\r\n            for (var i = 0, len = os.length; i < len; i++) {\r\n                var observer = os[i];\r\n                observer.onError(err);\r\n            }\r\n        }\r\n    }\r\n    getObserverCount() {\r\n        return this._observers.length;\r\n    }\r\n}\r\nfunction observe(observer) {\r\n    /*jshint validthis:true */\r\n    this._observers.push(observer);\r\n    return {\r\n        dispose: () => {\r\n            utils.removeAll(this._observers, observer);\r\n        }\r\n    };\r\n}\r\nexport default Subject;\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/reactive/Subject.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport AsyncWorkCompleteEvent from './AsyncWorkCompleteEvent';\r\nimport ModelChangedEvent from './ModelChangedEvent';\r\nexport default { AsyncWorkCompleteEvent, ModelChangedEvent };\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/model/events/index.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nclass AsyncWorkCompleteEvent {\r\n    constructor(operationId, results, isFinished) {\r\n        this._operationId = operationId;\r\n        this._results = results;\r\n        this._isFinished = isFinished;\r\n    }\r\n    get operationId() {\r\n        return this._operationId;\r\n    }\r\n    get results() {\r\n        return this._results;\r\n    }\r\n    get isFinished() {\r\n        return this._isFinished;\r\n    }\r\n}\r\nexport default AsyncWorkCompleteEvent;\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/model/events/AsyncWorkCompleteEvent.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nclass ModelChangedEvent {\r\n    constructor(modelId, eventType) {\r\n        this._modelId = modelId;\r\n        this._eventType = eventType;\r\n    }\r\n    get modelId() {\r\n        return this._modelId;\r\n    }\r\n    get eventType() {\r\n        return this._eventType;\r\n    }\r\n}\r\nexport default ModelChangedEvent;\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/model/events/ModelChangedEvent.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport events from './events';\r\nimport DisposableBase from './DisposableBase';\r\nimport ModelBase from './ModelBase';\r\nimport ModelRootBase from './ModelRootBase';\r\nexport default { events, DisposableBase, ModelBase, ModelRootBase};\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/model/index.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport system from '../system';\r\n\r\nclass DisposableBase {\r\n    constructor() {\r\n        this._disposables = new system.disposables.CompositeDisposable();\r\n    }\r\n    get isDisposed() {\r\n        return this._disposables.isDisposed;\r\n    }\r\n    addDisposable (disposable) {\r\n        this._disposables.add(disposable);\r\n    }\r\n    dispose () {\r\n        this._disposables.dispose();\r\n    }\r\n}\r\nexport default DisposableBase;\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/model/DisposableBase.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\n/**\r\n * A base class for model entities.\r\n *\r\n * You don't need to derive from this to use the router, provided as a convenience\r\n */\r\nclass ModelBase {\r\n    constructor() {\r\n        this._checkIsLocked = () => true;\r\n    }\r\n    ensureLocked() {\r\n        if(this._checkIsLocked()) {\r\n            throw new Error(\"Model is locked, can't edit\");\r\n        }\r\n    }\r\n    get isLocked() {\r\n        return this._checkIsLocked();\r\n    }\r\n}\r\nexport default ModelBase;\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/model/ModelBase.js\n **/","// notice_start\r\n/*\r\n * Copyright 2015 Keith Woods\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n // notice_end\r\n\r\nimport ModelBase from './ModelBase';\r\n\r\n/**\r\n * A base class for the root model entity.\r\n *\r\n * You don't need to derive from this to use the router, provided as a convenience\r\n */\r\nclass ModelRootBase extends ModelBase {\r\n    constructor() {\r\n        super();\r\n        this._isLocked = true;\r\n        this._checkIsLocked = (function(){\r\n            return this._isLocked;\r\n        }).bind(this);\r\n    }\r\n    lock() {\r\n        this._isLocked = true;\r\n    }\r\n    unlock() {\r\n        this._isLocked = false;\r\n    }\r\n    bindLockPredicate() {\r\n        this._bindLockPredicate(this);\r\n    }\r\n    _bindLockPredicate(parent) {\r\n        parent = parent || this;\r\n        for (var key in parent) {\r\n            if(parent.hasOwnProperty(key)) {\r\n                var o = parent[key];\r\n                if (o instanceof ModelBase) {\r\n                    o._checkIsLocked = this._checkIsLocked;\r\n                    this._bindLockPredicate(o);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default ModelRootBase;\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/dev/esp/esp-js/~/source-map-loader!C:/dev/esp/esp-js/src/model/ModelRootBase.js\n **/"],"sourceRoot":""}